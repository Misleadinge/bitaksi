basePath: /api/v1
definitions:
  github_com_bitaksi_driver-service_internal_domain.Driver:
    properties:
      carBrand:
        example: Toyota
        type: string
      carModel:
        example: Corolla
        type: string
      createdAt:
        example: "2025-12-06T01:00:00Z"
        type: string
      firstName:
        example: Ahmet
        type: string
      id:
        example: 507f1f77bcf86cd799439011
        type: string
      lastName:
        example: Demir
        type: string
      location:
        $ref: '#/definitions/github_com_bitaksi_driver-service_internal_domain.Location'
      plate:
        example: 34ABC123
        type: string
      taxiType:
        allOf:
        - $ref: '#/definitions/github_com_bitaksi_driver-service_internal_domain.TaxiType'
        example: sari
      updatedAt:
        example: "2025-12-06T01:00:00Z"
        type: string
    type: object
  github_com_bitaksi_driver-service_internal_domain.Location:
    properties:
      lat:
        example: 41.0431
        type: number
      lon:
        example: 29.0099
        type: number
    type: object
  github_com_bitaksi_driver-service_internal_domain.TaxiType:
    enum:
    - sari
    - turkuaz
    - siyah
    type: string
    x-enum-varnames:
    - TaxiTypeSari
    - TaxiTypeTurkuaz
    - TaxiTypeSiyah
  github_com_bitaksi_driver-service_internal_usecase.CreateDriverRequest:
    properties:
      carBrand:
        example: Toyota
        type: string
      carModel:
        example: Corolla
        type: string
      firstName:
        example: Ahmet
        type: string
      lastName:
        example: Demir
        type: string
      lat:
        example: 41.0431
        type: number
      lon:
        example: 29.0099
        type: number
      plate:
        example: 34ABC123
        type: string
      taksiType:
        allOf:
        - $ref: '#/definitions/github_com_bitaksi_driver-service_internal_domain.TaxiType'
        example: sari
    required:
    - carBrand
    - carModel
    - firstName
    - lastName
    - lat
    - lon
    - plate
    - taksiType
    type: object
  github_com_bitaksi_driver-service_internal_usecase.ListDriversResponse:
    properties:
      drivers:
        items:
          $ref: '#/definitions/github_com_bitaksi_driver-service_internal_domain.Driver'
        type: array
      page:
        example: 1
        type: integer
      pageSize:
        example: 20
        type: integer
      totalCount:
        example: 1
        type: integer
    type: object
  github_com_bitaksi_driver-service_internal_usecase.NearbyDriverResponse:
    properties:
      distanceKm:
        example: 0.5
        type: number
      firstName:
        example: Ahmet
        type: string
      id:
        example: 507f1f77bcf86cd799439011
        type: string
      lastName:
        example: Demir
        type: string
      plate:
        example: 34ABC123
        type: string
      taxiType:
        example: sari
        type: string
    type: object
  github_com_bitaksi_driver-service_internal_usecase.UpdateDriverRequest:
    properties:
      carBrand:
        example: Honda
        type: string
      carModel:
        example: Civic
        type: string
      firstName:
        example: Mehmet
        type: string
      lastName:
        example: Kurt
        type: string
      lat:
        example: 41.0082
        type: number
      lon:
        example: 28.9784
        type: number
      plate:
        example: 34XYZ789
        type: string
      taksiType:
        allOf:
        - $ref: '#/definitions/github_com_bitaksi_driver-service_internal_domain.TaxiType'
        example: turkuaz
    type: object
  internal_handler.ErrorResponse:
    properties:
      error:
        properties:
          code:
            example: VALIDATION_ERROR
            type: string
          message:
            example: 'plate must be in format: 2-3 digits, 1-3 letters, 1-4 digits
              (e.g., 34ABC123)'
            type: string
        type: object
    type: object
host: localhost:8081
info:
  contact:
    email: support@bitaksi.com
    name: API Support
  description: TaxiHub Driver Service API
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Driver Service API
  version: "1.0"
paths:
  /drivers:
    get:
      description: Get a paginated list of drivers
      parameters:
      - default: 1
        description: Page number
        example: 1
        in: query
        name: page
        type: integer
      - default: 20
        description: Page size
        example: 20
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Paginated list of drivers" example({"drivers":[{"id":"507f1f77bcf86cd799439011","firstName":"Ahmet","lastName":"Demir","plate":"34ABC123","taxiType":"sari","carBrand":"Toyota","carModel":"Corolla","location":{"lat":41.0431,"lon":29.0099},"createdAt":"2025-12-06T01:00:00Z","updatedAt":"2025-12-06T01:00:00Z"}],"totalCount":1,"page":1,"pageSize":20})
          schema:
            $ref: '#/definitions/github_com_bitaksi_driver-service_internal_usecase.ListDriversResponse'
        "400":
          description: Validation error" example({"error":{"code":"VALIDATION_ERROR","message":"invalid
            page number"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
        "500":
          description: Internal server error" example({"error":{"code":"INTERNAL_ERROR","message":"failed
            to list drivers"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
      summary: List drivers
      tags:
      - drivers
    post:
      consumes:
      - application/json
      description: Create a new taxi driver
      parameters:
      - description: Driver information
        in: body
        name: driver
        required: true
        schema:
          $ref: '#/definitions/github_com_bitaksi_driver-service_internal_usecase.CreateDriverRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Driver created successfully" example({"id":"507f1f77bcf86cd799439011","firstName":"Ahmet","lastName":"Demir","plate":"34ABC123","taxiType":"sari","carBrand":"Toyota","carModel":"Corolla","location":{"lat":41.0431,"lon":29.0099},"createdAt":"2025-12-06T01:00:00Z","updatedAt":"2025-12-06T01:00:00Z"})
          schema:
            $ref: '#/definitions/github_com_bitaksi_driver-service_internal_domain.Driver'
        "400":
          description: 'Validation error" example({"error":{"code":"VALIDATION_ERROR","message":"plate
            must be in format: 2-3 digits, 1-3 letters, 1-4 digits (e.g., 34ABC123)"}})'
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
        "500":
          description: Internal server error" example({"error":{"code":"INTERNAL_ERROR","message":"failed
            to create driver"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
      summary: Create a new driver
      tags:
      - drivers
  /drivers/{id}:
    get:
      description: Get driver details by ID
      parameters:
      - description: Driver ID
        example: '"507f1f77bcf86cd799439011"'
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Driver details" example({"id":"507f1f77bcf86cd799439011","firstName":"Ahmet","lastName":"Demir","plate":"34ABC123","taxiType":"sari","carBrand":"Toyota","carModel":"Corolla","location":{"lat":41.0431,"lon":29.0099},"createdAt":"2025-12-06T01:00:00Z","updatedAt":"2025-12-06T01:00:00Z"})
          schema:
            $ref: '#/definitions/github_com_bitaksi_driver-service_internal_domain.Driver'
        "404":
          description: Driver not found" example({"error":{"code":"NOT_FOUND","message":"driver
            not found"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
        "500":
          description: Internal server error" example({"error":{"code":"INTERNAL_ERROR","message":"failed
            to get driver"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
      summary: Get a driver by ID
      tags:
      - drivers
    put:
      consumes:
      - application/json
      description: 'Update an existing driver. Location can be updated using top-level
        lat/lon fields (same format as create): {"lat": 41.0, "lon": 29.0}'
      parameters:
      - description: Driver ID
        example: '"507f1f77bcf86cd799439011"'
        in: path
        name: id
        required: true
        type: string
      - description: Driver update information. Location uses top-level lat/lon fields.
        in: body
        name: driver
        required: true
        schema:
          $ref: '#/definitions/github_com_bitaksi_driver-service_internal_usecase.UpdateDriverRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Driver updated successfully" example({"id":"507f1f77bcf86cd799439011","firstName":"Ali","lastName":"Kurt","plate":"34G99","taxiType":"siyah","carBrand":"Mercedes","carModel":"G
            Class","location":{"lat":42.0082,"lon":28.9784},"createdAt":"2025-12-06T01:00:00Z","updatedAt":"2025-12-06T01:30:00Z"})
          schema:
            $ref: '#/definitions/github_com_bitaksi_driver-service_internal_domain.Driver'
        "400":
          description: Validation error" example({"error":{"code":"VALIDATION_ERROR","message":"both
            lat and lon must be provided together"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
        "404":
          description: Driver not found" example({"error":{"code":"NOT_FOUND","message":"driver
            not found"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
        "500":
          description: Internal server error" example({"error":{"code":"INTERNAL_ERROR","message":"failed
            to update driver"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
      summary: Update a driver
      tags:
      - drivers
  /drivers/nearby:
    get:
      description: Find drivers within 6km radius
      parameters:
      - description: Latitude
        example: 41.0431
        format: float64
        in: query
        name: lat
        required: true
        type: number
      - description: Longitude
        example: 29.0099
        format: float64
        in: query
        name: lon
        required: true
        type: number
      - description: Taxi type (sari, turkuaz, siyah)
        example: sari
        in: query
        name: taksiType
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of nearby drivers sorted by distance" example([{"id":"507f1f77bcf86cd799439011","firstName":"Ahmet","lastName":"Demir","plate":"34ABC123","taxiType":"sari","carBrand":"Toyota","carModel":"Corolla","location":{"lat":41.0431,"lon":29.0099},"distance":0.5}])
          schema:
            items:
              $ref: '#/definitions/github_com_bitaksi_driver-service_internal_usecase.NearbyDriverResponse'
            type: array
        "400":
          description: Validation error" example({"error":{"code":"VALIDATION_ERROR","message":"latitude
            is required"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
        "500":
          description: Internal server error" example({"error":{"code":"INTERNAL_ERROR","message":"failed
            to find nearby drivers"}})
          schema:
            $ref: '#/definitions/internal_handler.ErrorResponse'
      summary: Find nearby drivers
      tags:
      - drivers
swagger: "2.0"
